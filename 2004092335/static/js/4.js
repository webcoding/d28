webpackJsonp([4,50,100,101],{TdIe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),i=n.n(s),a=n("cdA+"),o=n("0xDb"),r={data:function(){return{updatePassowrdVisible:!1,unReadMsg:"",websocket:null,wsData:"",kefuVisible:!1,onLine:[],msg:"",to:[]}},components:{UpdatePassword:a.default},computed:{navbarLayoutType:{get:function(){return this.$store.state.common.navbarLayoutType}},sidebarFold:{get:function(){return this.$store.state.common.sidebarFold},set:function(e){this.$store.commit("common/updateSidebarFold",e)}},mainTabs:{get:function(){return this.$store.state.common.mainTabs},set:function(e){this.$store.commit("common/updateMainTabs",e)}},userName:{get:function(){return this.$store.state.user.name}}},mounted:function(){this.initWebSocket()},beforeDestroy:function(){this.onbeforeunload()},methods:{openKefu:function(){this.kefuVisible=!this.kefuVisible,this.unReadMsg=""},sendAll:function(){if(this.msg){var e={msg:this.msg,type:1},t=i()(e);this.websocket.send(t)}else this.$message.error("发送内容不能为空")},sendToUser:function(){if(this.msg)if(0===this.to.length)this.$message.error("请选择一个用户");else{var e={to:this.to,msg:this.msg,type:2},t=i()(e);this.websocket.send(t)}else this.$message.error("发送内容不能为空")},updatePasswordHandle:function(){var e=this;this.updatePassowrdVisible=!0,this.$nextTick(function(){e.$refs.updatePassowrd.init()})},logoutHandle:function(){var e=this;this.$confirm("确定进行[退出]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:"/sys/logout",method:"post"}).then(function(t){var n=t.data;n&&0===n.code&&(Object(o.a)(),e.$router.push({name:"login"}))})}).catch(function(){})},initWebSocket:function(){},setErrorMessage:function(){this.wsData+="WebSocket连接发生错误   状态码："+this.websocket.readyState},setOnopenMessage:function(){console.log("WebSocket连接成功   状态码："+this.websocket.readyState)},setOnmessageMessage:function(e){var t=JSON.parse(e.data);t.users?this.onLine=t.users:(this.$message({type:"success",message:"您有新的消息！内容："+t.msg,center:!0}),this.wsData+=e.data,this.unReadMsg++)},setOncloseMessage:function(){console.log("WebSocket连接关闭   状态码："+this.websocket.readyState)},onbeforeunload:function(){this.websocket.close()}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"site-navbar",class:"site-navbar--"+e.navbarLayoutType},[e.sidebarFold?e._e():s("div",{staticClass:"site-navbar__header"},[s("h1",{staticClass:"site-navbar__brand",on:{click:function(t){return e.$router.push({name:"home"})}}},[s("a",{staticClass:"site-navbar__brand-lg",attrs:{href:"javascript:;"}},[e._v("微同软件管理平台")])])]),e._v(" "),s("div",{staticClass:"site-navbar__body clearfix"},[s("el-menu",{staticClass:"site-navbar__menu",attrs:{mode:"horizontal"}},[s("el-menu-item",{staticClass:"site-navbar__switch",attrs:{index:"0"},on:{click:function(t){e.sidebarFold=!e.sidebarFold}}},[s("icon-svg",{attrs:{name:"zhedie"}})],1)],1),e._v(" "),s("el-menu",{staticClass:"site-navbar__menu site-navbar__menu--right",attrs:{mode:"horizontal"}},[s("el-menu-item",{attrs:{index:"0"},on:{click:e.openKefu}},[s("template",{slot:"title"},[s("el-badge",{attrs:{value:e.unReadMsg}},[s("icon-svg",{staticClass:"el-icon-setting",attrs:{name:"wechat"}})],1)],1)],2),e._v(" "),s("el-menu-item",{attrs:{index:"1"}},[s("el-badge",{attrs:{value:"hot"}},[s("a",{attrs:{href:"//fly2you.cn/",target:"_blank"}},[e._v("官方社区")])])],1),e._v(" "),s("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.$router.push({name:"theme"})}}},[s("template",{slot:"title"},[s("el-badge",{attrs:{"is-dot":"",value:"new"}},[s("icon-svg",{staticClass:"el-icon-setting",attrs:{name:"xitongpeizhi"}})],1)],1)],2),e._v(" "),s("el-menu-item",{staticClass:"site-navbar__avatar",attrs:{index:"3"}},[s("el-dropdown",{attrs:{"show-timeout":0,placement:"bottom"}},[s("span",{staticClass:"el-dropdown-link"},[s("img",{attrs:{src:n("zQrT"),alt:e.userName}}),e._v(e._s(e.userName)+"\n          ")]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(t){return e.updatePasswordHandle()}}},[e._v("修改密码")]),e._v(" "),s("el-dropdown-item",{nativeOn:{click:function(t){return e.logoutHandle()}}},[e._v("退出")])],1)],1)],1)],1)],1),e._v(" "),e.updatePassowrdVisible?s("update-password",{ref:"updatePassowrd"}):e._e(),e._v(" "),s("el-dialog",{attrs:{"close-on-click-modal":!1,title:"客服消息",visible:e.kefuVisible,"append-to-body":!0},on:{"update:visible":function(t){e.kefuVisible=t}}},[s("div",{staticStyle:{height:"300px","overflow-y":"auto","background-color":"#EDEDED"}},[e._v("\n      "+e._s(e.wsData)+"\n    ")]),e._v("\n    发送用户："),s("br"),e._v(" "),s("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.to,callback:function(t){e.to=t},expression:"to"}},e._l(e.onLine,function(e){return s("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})}),1),e._v(" "),s("br"),e._v("发送内容：\n    "),s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"success"},on:{click:e.sendAll}},[e._v("群发")]),e._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:e.sendToUser}},[e._v("指定用户")]),e._v(" "),s("el-button",{on:{click:function(t){e.kefuVisible=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]},c=n("VU/8")(r,u,!1,null,null,null);t.default=c.exports},YbVU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("oZaA"),i=n("E4LH"),a={data:function(){return{dynamicMenuRoutes:[]}},components:{SubMenu:s.default},computed:{sidebarLayoutSkin:{get:function(){return this.$store.state.common.sidebarLayoutSkin}},sidebarFold:{get:function(){return this.$store.state.common.sidebarFold}},menuList:{get:function(){return this.$store.state.common.menuList},set:function(e){this.$store.commit("common/updateMenuList",e)}},menuActiveName:{get:function(){return this.$store.state.common.menuActiveName},set:function(e){this.$store.commit("common/updateMenuActiveName",e)}},mainTabs:{get:function(){return this.$store.state.common.mainTabs},set:function(e){this.$store.commit("common/updateMainTabs",e)}},mainTabsActiveName:{get:function(){return this.$store.state.common.mainTabsActiveName},set:function(e){this.$store.commit("common/updateMainTabsActiveName",e)}}},watch:{$route:"routeHandle"},created:function(){this.menuList=JSON.parse(sessionStorage.getItem("menuList")||"[]"),this.dynamicMenuRoutes=JSON.parse(sessionStorage.getItem("dynamicMenuRoutes")||"[]"),this.routeHandle(this.$route)},methods:{routeHandle:function(e){if(e.meta.isTab){var t=this.mainTabs.filter(function(t){return t.name===e.name})[0];if(!t){if(e.meta.isDynamic&&!(e=this.dynamicMenuRoutes.filter(function(t){return t.name===e.name})[0]))return console.error("未能找到可用标签页!");t={menuId:e.meta.menuId||e.name,name:e.name,title:e.meta.title,type:Object(i.b)(e.meta.iframeUrl)?"iframe":"module",iframeUrl:e.meta.iframeUrl||""},this.mainTabs=this.mainTabs.concat(t)}this.menuActiveName=t.menuId+"",this.mainTabsActiveName=t.name}}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sidebarFold?e._e():n("aside",{staticClass:"site-sidebar",class:"site-sidebar--"+e.sidebarLayoutSkin},[n("div",{staticClass:"site-sidebar__inner"},[n("el-menu",{staticClass:"site-sidebar__menu",attrs:{"unique-opened":"","default-active":e.menuActiveName||"home",collapse:e.sidebarFold,collapseTransition:!1}},[n("el-menu-item",{attrs:{index:"home"},on:{click:function(t){return e.$router.push({name:"home"})}}},[n("icon-svg",{staticClass:"site-sidebar__menu-icon",attrs:{name:"shouye"}}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])],1),e._v(" "),e._l(e.menuList,function(t){return n("sub-menu",{key:t.menuId,attrs:{menu:t,dynamicMenuRoutes:e.dynamicMenuRoutes}})})],2)],1)])},staticRenderFns:[]},r=n("VU/8")(a,o,!1,null,null,null);t.default=r.exports},"sRz/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("TdIe"),i=n("YbVU"),a=n("xzNW"),o={data:function(){return{}},components:{MainNavbar:s.default,MainSidebar:i.default,MainContent:a.default},computed:{documentClientHeight:{get:function(){return this.$store.state.common.documentClientHeight},set:function(e){this.$store.commit("common/updateDocumentClientHeight",e)}},sidebarFold:{get:function(){return this.$store.state.common.sidebarFold}},userId:{get:function(){return this.$store.state.user.id},set:function(e){this.$store.commit("user/updateId",e)}},userName:{get:function(){return this.$store.state.user.name},set:function(e){this.$store.commit("user/updateName",e)}}},created:function(){this.getUserInfo()},mounted:function(){this.resetDocumentClientHeight()},methods:{resetDocumentClientHeight:function(){var e=this;this.documentClientHeight=document.documentElement.clientHeight,window.onresize=function(){e.documentClientHeight=document.documentElement.clientHeight}},getUserInfo:function(){var e=this;this.$http({url:"/sys/user/info",method:"get"}).then(function(t){var n=t.data;n&&0===n.code&&(e.userId=n.user.userId,e.userName=n.user.userName)})}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"site-wrapper",class:{"site-sidebar--fold":this.sidebarFold}},[[t("main-navbar"),this._v(" "),t("main-sidebar"),this._v(" "),t("div",{staticClass:"site-content__wrapper",style:{"min-height":this.documentClientHeight+"px"}},[t("main-content")],1)]],2)},staticRenderFns:[]},u=n("VU/8")(o,r,!1,null,null,null);t.default=u.exports},xzNW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("E4LH"),i={data:function(){return{}},computed:{documentClientHeight:{get:function(){return this.$store.state.common.documentClientHeight}},menuActiveName:{get:function(){return this.$store.state.common.menuActiveName},set:function(e){this.$store.commit("common/updateMenuActiveName",e)}},mainTabs:{get:function(){return this.$store.state.common.mainTabs},set:function(e){this.$store.commit("common/updateMainTabs",e)}},mainTabsActiveName:{get:function(){return this.$store.state.common.mainTabsActiveName},set:function(e){this.$store.commit("common/updateMainTabsActiveName",e)}},siteContentViewHeight:function(){var e=this.documentClientHeight-50-30-2;return this.$route.meta.isTab?(e-=40,Object(s.b)(this.$route.meta.iframeUrl)?{height:e+"px"}:{minHeight:e+"px"}):{minHeight:e+"px"}}},methods:{selectedTabHandle:function(e){(e=this.mainTabs.filter(function(t){return t.name===e.name})).length>=1&&this.$router.push({name:e[0].name})},removeTabHandle:function(e){var t=this;this.mainTabs=this.mainTabs.filter(function(t){return t.name!==e}),this.mainTabs.length>=1?e===this.mainTabsActiveName&&this.$router.push({name:this.mainTabs[this.mainTabs.length-1].name},function(){t.mainTabsActiveName=t.$route.name}):(this.menuActiveName="",this.$router.push({name:"home"}))},tabsCloseCurrentHandle:function(){this.removeTabHandle(this.mainTabsActiveName)},tabsCloseOtherHandle:function(){var e=this;this.mainTabs=this.mainTabs.filter(function(t){return t.name===e.mainTabsActiveName})},tabsCloseAllHandle:function(){this.mainTabs=[],this.menuActiveName="",this.$router.push({name:"home"})},tabsRefreshCurrentHandle:function(){var e=this,t=this.mainTabsActiveName;this.removeTabHandle(t),this.$nextTick(function(){e.$router.push({name:t})})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"site-content",class:{"site-content--tabs":e.$route.meta.isTab}},[e.$route.meta.isTab?n("el-tabs",{attrs:{closable:!0},on:{"tab-click":e.selectedTabHandle,"tab-remove":e.removeTabHandle},model:{value:e.mainTabsActiveName,callback:function(t){e.mainTabsActiveName=t},expression:"mainTabsActiveName"}},[n("el-dropdown",{staticClass:"site-tabs__tools",attrs:{"show-timeout":0}},[n("i",{staticClass:"el-icon-arrow-down el-icon--right"}),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.tabsCloseCurrentHandle(t)}}},[e._v("关闭当前标签页")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){return e.tabsCloseOtherHandle(t)}}},[e._v("关闭其它标签页")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){return e.tabsCloseAllHandle(t)}}},[e._v("关闭全部标签页")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){return e.tabsRefreshCurrentHandle(t)}}},[e._v("刷新当前标签页")])],1)],1),e._v(" "),e._l(e.mainTabs,function(t){return n("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[n("el-card",{attrs:{"body-style":e.siteContentViewHeight}},["iframe"===t.type?n("iframe",{attrs:{src:t.iframeUrl,width:"100%",height:"100%",frameborder:"0",scrolling:"yes"}}):n("keep-alive",[t.name===e.mainTabsActiveName?n("router-view"):e._e()],1)],1)],1)})],2):n("el-card",{attrs:{"body-style":e.siteContentViewHeight}},[n("keep-alive",[n("router-view")],1)],1)],1)},staticRenderFns:[]},o=n("VU/8")(i,a,!1,null,null,null);t.default=o.exports},zQrT:function(e,t,n){e.exports=n.p+"static/img/avatar.68ce495.png"}});