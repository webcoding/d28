webpackJsonp([56],{P86h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{dataListSelections:[],dataList:[],searchForm:{type:"1"}}},activated:function(){this.getDataList()},methods:{selectionChangeHandle:function(e){this.dataListSelections=e},getDataList:function(){var e=this;this.$http({url:"/sys/cache/queryAll",method:"get",params:{type:this.searchForm.type}}).then(function(t){var a=t.data;a&&0===a.code&&(e.dataList=a.list)})},deleteHandle:function(e){var t=this;console.log(e);var a=e?[e]:this.dataListSelections.map(function(e){return e.cacheKey});this.$confirm("确定对[KEY="+a.join(",")+"]进行[删除]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:"/sys/cache/deleteCache",method:"post",data:a}).then(function(e){var a=e.data;a&&0===a.code&&(t.$message({message:"操作成功",type:"success",duration:1500}),t.getDataList())})}).catch(function(){})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.searchForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDataList()}}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{key:"1",attrs:{label:"请选择",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"session缓存",value:"2"}}),e._v(" "),a("el-option",{key:"3",attrs:{label:"系统缓存",value:"3"}}),e._v(" "),a("el-option",{key:"4",attrs:{label:"业务缓存",value:"4"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){return e.getDataList()}}},[e._v("查询")]),e._v(" "),e.isAuth("sys:cache:deleteCache")?a("el-button",{attrs:{type:"danger",disabled:e.dataListSelections.length<=0},on:{click:function(t){return e.deleteHandle()}}},[e._v("批量删除\n      ")]):e._e()],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.dataList},on:{"selection-change":e.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cacheKey",label:"缓存KEY","show-tooltip-when-overflow":"",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"缓存VALUE",flex:"1"}}),e._v(" "),a("el-table-column",{attrs:{prop:"seconds",label:"过期剩余时间(秒)",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAuth("sys:cache:deleteCache")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteHandle(t.row.cacheKey)}}},[e._v("\n          删除\n        ")]):e._e()]}}])})],1)],1)},staticRenderFns:[]},s=a("VU/8")(n,l,!1,null,null,null);t.default=s.exports}});